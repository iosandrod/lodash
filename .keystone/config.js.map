{
  "version": 3,
  "sources": ["../keystone.ts"],
  "sourcesContent": ["import { config } from '@keystone-6/core'\r\nimport { text, password, timestamp, relationship } from '@keystone-6/core/fields'\r\nimport { createAuth } from '@keystone-6/auth'\r\nimport { statelessSessions } from '@keystone-6/core/session'\r\n\r\n// \u4F1A\u8BDD\u914D\u7F6E\r\nconst sessionConfig = statelessSessions({\r\n  secret: 'adfasfasfasfasfasfdasfasfdafdasadsfdsasd', // \u66FF\u6362\u6210\u4F60\u81EA\u5DF1\u7684\u5BC6\u94A5\r\n  maxAge: 60 * 60 * 24 * 30, // \u4F1A\u8BDD\u8FC7\u671F\u65F6\u95F4 (30 \u5929)\r\n})\r\n\r\n// \u8EAB\u4EFD\u9A8C\u8BC1\u914D\u7F6E\r\nconst { withAuth } = createAuth({\r\n  listKey: 'User', // \u7528\u6237\u5217\u8868\r\n  identityField: 'email', // \u7528\u6237\u8EAB\u4EFD\u5B57\u6BB5\r\n  secretField: 'password', // \u5BC6\u7801\u5B57\u6BB5\r\n  sessionData: 'id name email', // \u4F1A\u8BDD\u4E2D\u5305\u542B\u7684\u6570\u636E\r\n})\r\n\r\n// \u6570\u636E\u6A21\u578B\u5B9A\u4E49\r\nconst lists = {\r\n  User: {\r\n    fields: {\r\n      name: text({ validation: { isRequired: true } }), // \u7528\u6237\u59D3\u540D\r\n      email: text({ validation: { isRequired: true } }), // \u90AE\u7BB1\r\n      password: password(), // \u5BC6\u7801\r\n      posts: relationship({ ref: 'Post.author', many: true }), // \u5173\u8054\u7684\u6587\u7AE0\r\n    },\r\n    ui: {\r\n      listView: { initialColumns: ['name', 'email'] }, // \u7BA1\u7406\u754C\u9762\u521D\u59CB\u663E\u793A\u7684\u5217\r\n    },\r\n  },\r\n  Post: {\r\n    fields: {\r\n      title: text({ validation: { isRequired: true } }), // \u6807\u9898\r\n      content: text(), // \u5185\u5BB9\r\n      author: relationship({ ref: 'User.posts' }), // \u6587\u7AE0\u4F5C\u8005\r\n      createdAt: timestamp({ defaultValue: { kind: 'now' } }), // \u521B\u5EFA\u65F6\u95F4\r\n    },\r\n    ui: {\r\n      listView: { initialColumns: ['title', 'author', 'createdAt'] },\r\n    },\r\n  },\r\n}\r\n\r\n// Keystone \u914D\u7F6E\r\nexport default withAuth(\r\n  config({\r\n    db: {\r\n      provider: 'sqlite', // \u4F7F\u7528 SQLite \u6570\u636E\u5E93\r\n      url: 'file:./keystone.db', // \u6570\u636E\u5E93\u6587\u4EF6\u8DEF\u5F84\r\n    },\r\n    server: {\r\n      cors: { origin: ['http://localhost:3000'], credentials: true }, // \u5141\u8BB8\u8DE8\u57DF\r\n    },\r\n    //@ts-ignore-\r\n    lists,\r\n    session: sessionConfig,\r\n  })\r\n)\r\n"],
  "mappings": ";;;;;;;;;;;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAAuB;AACvB,oBAAwD;AACxD,kBAA2B;AAC3B,qBAAkC;AAGlC,IAAM,oBAAgB,kCAAkB;AAAA,EACtC,QAAQ;AAAA;AAAA,EACR,QAAQ,KAAK,KAAK,KAAK;AAAA;AACzB,CAAC;AAGD,IAAM,EAAE,SAAS,QAAI,wBAAW;AAAA,EAC9B,SAAS;AAAA;AAAA,EACT,eAAe;AAAA;AAAA,EACf,aAAa;AAAA;AAAA,EACb,aAAa;AAAA;AACf,CAAC;AAGD,IAAM,QAAQ;AAAA,EACZ,MAAM;AAAA,IACJ,QAAQ;AAAA,MACN,UAAM,oBAAK,EAAE,YAAY,EAAE,YAAY,KAAK,EAAE,CAAC;AAAA;AAAA,MAC/C,WAAO,oBAAK,EAAE,YAAY,EAAE,YAAY,KAAK,EAAE,CAAC;AAAA;AAAA,MAChD,cAAU,wBAAS;AAAA;AAAA,MACnB,WAAO,4BAAa,EAAE,KAAK,eAAe,MAAM,KAAK,CAAC;AAAA;AAAA,IACxD;AAAA,IACA,IAAI;AAAA,MACF,UAAU,EAAE,gBAAgB,CAAC,QAAQ,OAAO,EAAE;AAAA;AAAA,IAChD;AAAA,EACF;AAAA,EACA,MAAM;AAAA,IACJ,QAAQ;AAAA,MACN,WAAO,oBAAK,EAAE,YAAY,EAAE,YAAY,KAAK,EAAE,CAAC;AAAA;AAAA,MAChD,aAAS,oBAAK;AAAA;AAAA,MACd,YAAQ,4BAAa,EAAE,KAAK,aAAa,CAAC;AAAA;AAAA,MAC1C,eAAW,yBAAU,EAAE,cAAc,EAAE,MAAM,MAAM,EAAE,CAAC;AAAA;AAAA,IACxD;AAAA,IACA,IAAI;AAAA,MACF,UAAU,EAAE,gBAAgB,CAAC,SAAS,UAAU,WAAW,EAAE;AAAA,IAC/D;AAAA,EACF;AACF;AAGA,IAAO,mBAAQ;AAAA,MACb,oBAAO;AAAA,IACL,IAAI;AAAA,MACF,UAAU;AAAA;AAAA,MACV,KAAK;AAAA;AAAA,IACP;AAAA,IACA,QAAQ;AAAA,MACN,MAAM,EAAE,QAAQ,CAAC,uBAAuB,GAAG,aAAa,KAAK;AAAA;AAAA,IAC/D;AAAA;AAAA,IAEA;AAAA,IACA,SAAS;AAAA,EACX,CAAC;AACH;",
  "names": []
}
